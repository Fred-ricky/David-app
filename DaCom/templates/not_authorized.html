 
        if request.method == 'POST':
        username = request.POST['username']
        email = request.POST['email']
        password = request.POST['password']
        password2 = request.POST['password2']

        if password == password2:
            if User.objects.filter(email=email).exists():
                messages.info(request, 'Email Taken')
                return redirect('register')
            elif User.objects.filter(username=username).exists():
                messages.info(request, 'Username Taken')
                return redirect('register')
            else:
                user = User.objects.create_user(username=username, email=email, password=password)
                user.save()

            #log user in and redirect to settings page
                user_login = auth.authenticate(username=username, password=password)
                auth.login(request, user_login)

            #create a Profile object for the new user
                user_model = User.objects.get(username=username)
                new_profile = Client.objects.create(user=user_model, id_user=user_model.id)
                new_profile.save()
                return redirect('client_dashboard')
    else:      
       
        return render(request, 'register.html' )



        from django.contrib.auth import get_user_model
        from django.db import models
        
        User = get_user_model()
        
        class CustomUser(User):
            USER_TYPE_CHOICES = (
                ('client', 'Client'),
                ('worker', 'Worker'),
            )
            user_type = models.CharField(max_length=10, choices=USER_TYPE_CHOICES)
        
        
        class Client(models.Model):
            user = models.ForeignKey(User, on_delete=models.CASCADE)
            id_user = models.IntegerField()
            company_name = models.CharField(max_length=100)
            phone = models.CharField(max_length=15)
            email = models.EmailField(max_length=254)
            state = models.CharField(max_length=50)
            LGA = models.CharField(max_length=50)    
        
            def __str__(self):
                return self.company_name
           
        
        class Worker(models.Model):
            user = models.ForeignKey(User, on_delete=models.CASCADE)
            id_user = models.IntegerField(default='')
            first_name = models.CharField(max_length=150)
            last_name = models.CharField(max_length=150)
            phone = models.CharField(max_length=15)
            email =models.EmailField(max_length=254)
            state = models.CharField(max_length=50)
            LGA = models.CharField(max_length=50) 
        
            def __str__(self):
                return self.first_name




                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Client Registration Form</title>
                    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
                </head>
                
                    <div class="container">
                        <h2 class="mt-5">Client Registration Form</h2>
                        <form method="post" action="">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="username">Username</label>
                                <input type="text" class="form-control" id="username" name="username" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                           
                            
                            <div class="form-group">
                                <label for="password1">Password</label>
                                <input type="password" class="form-control" id="password1" name="password" required>
                            </div>
                            <div class="form-group">
                                <label for="password2">Confirm Password</label>
                                <input type="password" class="form-control" id="password2" name="password2" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Register</button>
                        </form>
                    </div>
                    
                    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
                    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

                    

                    class AssignmentForm(forms.ModelForm):
    class Meta:
        model = Assignment
        fields = ['worker', 'client']

class AssignmentInline(admin.TabularInline):
    model = Assignment
    form = AssignmentForm
    extra = 1
class WorkerAdmin(admin.ModelAdmin):
    list_display = ('first_name', 'last_name')
    inlines = [AssignmentInline]

class ClientAdmin(admin.ModelAdmin):
    list_display = ('company_name', 'LGA')
    inlines = [AssignmentInline]

class AssignmentAdmin(admin.ModelAdmin):
    list_display = ('worker', 'client', 'assigned_at')
    list_filter = ('worker', 'client')
    search_fields = ('worker__name', 'client__name')

admin.site.register(Worker, WorkerAdmin)
admin.site.register(Client, ClientAdmin)
admin.site.register(Assignment, AssignmentAdmin)


            
            
            
            
            
    